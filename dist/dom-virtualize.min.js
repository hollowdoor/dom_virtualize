var domVirtualize=function(){"use strict";function t(t){for(var e=!1,r=!1,n=!1,o=0;o<t.length;o++){var i=t[o];e&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(t=t.substr(0,o)+"-"+t.substr(o),e=!1,n=r,r=!0,o++):r&&n&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(t=t.substr(0,o-1)+"-"+t.substr(o-1),n=r,r=!1,e=!0):(e=i.toLowerCase()===i,n=r,r=i.toUpperCase()===i)}return t}function e(t){return t+""=="[object DocumentFragment]"}function r(t){return e(t)||n(t)}function n(t){return null!=t&&"object"==typeof t&&t.nodeType===Node.ELEMENT_NODE&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}function o(t){return"[object Date]"===Object.prototype.toString.call(t)}function i(){for(var t=arguments,r=[],o=arguments.length;o--;)r[o]=t[o];return r.map(function(t){if(void 0===t)return"";if(L(t)&&t.hasOwnProperty("element")&&(t=t.element),"string"==typeof t)return t;if(n(t))return t.outerHTML;if(e(t)){var r=document.createElement("div");return r.appendChild(t.cloneNode(!0)),r.innerHTML}}).join("")}function a(t){var e=document.createElement("div"),r=document.createDocumentFragment();for(e.innerHTML=t;e.firstChild;)r.appendChild(e.firstChild);return r}function u(t){var e=a(t);return 1===e.children.length?e.removeChild(e.firstChild):e}function c(t){try{return t.toLocaleString(M,T)}catch(e){return t+""}}function l(t){if(o(t))return c(t);if(t.constructor===Object)try{return JSON.stringify(t,null,2)}catch(t){}return t+""}function d(t,e){if(t.dataset)return Object.keys(e).forEach(function(r){return t.dataset[A(r)]=e[r]}),t}function f(t,e){if(t.setAttribute&&-1===[3,8,2].indexOf(t.nodeType))return Object.keys(e).forEach(function(r){t.setAttribute(r,e[r]+"")}),t}function s(t,e){var r=window.getComputedStyle(t);t.style&&Object.keys(e).forEach(function(n){void 0!==r[n]?t.style[A(n)]=e[n]+"":t.style.setProperty("--"+decamelize(n,"-"),e[n]+"")})}function h(t){for(var e=arguments,r=[],n=arguments.length-1;n-- >0;)r[n]=e[n+1];return"string"!=typeof t&&E(t)?(t=x(t),r.length?p(t.reduce(function(t,e,n){return t+e+i(r[n])},"")):t.reduce(function(t,e){return t.appendChild(p(e)),t},document.createDocumentFragment())):p(t)}function p(t){if(L(t)&&(t.hasOwnProperty("element")&&(t=t.element),L(t))){if(r(t)||t===document)return t;if(t.hasOwnProperty("tag"))return m(t);t=l(t)}try{var e=document.querySelector(t);if(e)return e}catch(t){}return u(t)}function m(t){var e,r,n=null,o=Object.keys(t),a=function(t){return-1!==(r=o.indexOf(t+""))&&(o.splice(r,1),!0)};if(!a("tag"))throw new Error('obj must have a "tag" property with a DOM tag name');return e=document.createElement(t.tag.toLowerCase()),a("attributes")&&L(t.attributes)&&f(e,t.attributes),a("data")&&L(t.data)&&d(e,t.data),a("innerHTML")&&(e.innerHTML=i(t.innerHTML)),a("head")&&e.appendChild(h(t.head)),a("children")&&E(t.children)&&y(e,t.children),a("foot")&&e.appendChild(h(t.foot)),a("style")&&L(t.style)&&s(e,t.style),a("parent")&&(n=h(t.parent)),o.forEach(function(r){"function"===t[r]||L(t[r])||(e[r]=t[r])}),n&&n.appendChild(e),e}function y(t,e){return x(e).forEach(function(e){t.appendChild(h(e))}),t}var g=Array.isArray,v=Object.prototype.toString,b=g||function(t){return!!t&&"[object Array]"==v.call(t)},w=function(t){if(null==t)return!1;var e=Object(t);return e===e.window},C=function(t){var e=j.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)},j=Object.prototype.toString,E=function(t){if(!t)return!1;if(b(t))return!0;if(C(t)||w(t))return!1;var e="length"in(t=Object(t))&&t.length;return!(1!==t.nodeType||!e)||(0===e||"number"==typeof e&&e>0&&e-1 in t)},O=function(){var t=function(t){return"function"==typeof t},e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,n=function(t){var n=e(t);return Math.min(Math.max(n,0),r)},o=function(t){if(null!=t){if(["string","number","boolean","symbol"].indexOf(typeof t)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}},i=function(e,r){if(null!=e&&null!=r){var n=e[r];if(null==n)return;if(!t(n))throw new TypeError(n+" is not a function");return n}},a=function(t){var e=t.next();return!Boolean(e.done)&&e};return function(e){var r,u=this,c=arguments.length>1?arguments[1]:void 0;if(void 0!==c){if(!t(c))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}var l,d,f=i(e,o(e));if(void 0!==f){l=t(u)?Object(new u):[];var s=f.call(e);if(null==s)throw new TypeError("Array.from requires an array-like or iterable object");d=0;for(var h,p;;){if(!(h=a(s)))return l.length=d,l;p=h.value,l[d]=c?c.call(r,p,d):p,d++}}else{var m=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=n(m.length);l=t(u)?Object(new u(y)):new Array(y),d=0;for(var g;d<y;)g=m[d],l[d]=c?c.call(r,g,d):g,d++;l.length=y}return l}}(),x="function"==typeof Array.from?Array.from:O,A=function(e){return 0===(e=arguments.length>1?Array.from(arguments).map(function(t){return t.trim()}).filter(function(t){return t.length}).join("-"):e.trim()).length?"":1===e.length?e.toLowerCase():/^[a-z0-9]+$/.test(e)?e:(e!==e.toLowerCase()&&(e=t(e)),e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()}))},L=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)},T={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},M=window.navigator.userLanguage||window.navigator.language,S=function(t){function e(t){c.expand()}var r=t.frame;void 0===r&&(r=document.createElement("div"));var n=t.parent;void 0===n&&(n=document.createElement("div"));var o=t.render;void 0===o&&(o=null);var i=t.afterAdd;void 0===i&&(i=function(){});var a=t.childHeight;void 0===a&&(a=0);var u=t.classes;void 0===u&&(u={}),r.style.width="500px",r.style.height="400px",r.style.border="1px solid black",r.style.display="block";var c=this;r.appendChild(n),this.startIndex=0,this.childHeight=a,this.data=[],this.element=this.frame=r,this.container=this._parent=n,this._render=o,this._afterAdd=i,this.indexes={top:0,bottom:0},r.style.overflow="scroll",r.addEventListener("scroll",e),this.destroy=function(){r.removeEventListener("scroll",e)}};return S.prototype.expand=function(){var t=this,e=(this._parent.firstChild,this._parent.lastChild),r=e?e.getBoundingClientRect():null,n=this.frame.getBoundingClientRect(),o=this._parent,i=this.indexes.bottom;if(!r||r.top<=n.bottom){for(var a=o.children.length;a<this.data.length&&!(e&&(r=e.getBoundingClientRect(),console.log("rect ",r),r.bottom>=n.bottom&&r.right>n.right-r.width));a++){var u=h(t._render(t.data[a]));o.appendChild(u),e=u,i=a}this.indexes.bottom=i}else if(r.top>n.bottom+10)for(var c=0;c<o.children.length;c++){var l=o.children[c];(r=l.getBoundingClientRect()).top>n.bottom+10&&o.removeChild(l)}if(r=o.children[this.startIndex]?o.children[this.startIndex].getBoundingClientRect():null)if(console.log("top ",r.bottom<n.top-10),r.bottom<n.top-10)for(var d=0;d<o.children.length;++d){var f=o.children[d];if((r=f.getBoundingClientRect()).bottom<n.top+10){var s=f.cloneNode();s.innerHTML="",o.replaceChild(s,f),t.startIndex=d}}else if(r.bottom>=n.top){var p=this.startIndex;console.log("start ",p);for(var m=p;m>-1;--m){var y=o.children[m];if(y&&(r=y.getBoundingClientRect(),console.log("rect ",r),r.bottom<=n.top)){t.startIndex=m;break}var g=h(t._render(t.data[m]));o.replaceChild(g,y)}}},S.prototype.push=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this.data=this.data.concat(t),this._afterAdd(),this.expand()},S.prototype.appendTo=function(t){try{t.appendChild(this.element)}catch(t){console.error(t)}},function(t){return new S(t)}}();
//# sourceMappingURL=dom-virtualize.min.js.map
